<div class="bankactivity-wrapper">
  <div class="summary-container">
    <h2 class="font-bold-title">You have stored <span class="marker forgot"><span class="font-red"><%= @negative_count %></span>bakus</span> and <span class="marker stored"><span class="font-red"><%= @positive_count %></span>pigs</span><br>
      You saved
      <span class="total-money">
        <% @sum = 0 %>
        <% @feelings.each do |feeling| %>
          <% @sum += feeling.price_cents %>
        <% end %>
        <span class="font-red">¥<%= @sum %></span>
      </span>
    </h2>
  </div>
  <div class="chart-container">
      <table>
        <%= render partial: "week" %>
      </table>
  </div>
  <div class="record-container">
    <div class="record-wrap onhidden">
      <h2 class="font-round-title">Bank Activity</h2>
      <%= render partial: "shared/messages" %>
      <div class="readmore"><span>display more</span><i class="fas fa-angle-double-down"></i></div>
    </div>
    <div class="total-money text-right">
      <% @sum = 0 %>
      <% @feelings.each do |feeling| %>
      <% @sum += feeling.price_cents %>
      <% end %>
      <p class="font-round-title">Total: ¥<%= @sum %></p>
    </div>
  </div>

  <div class="linkarea-container linkarea-container text-center">
    <%= link_to 'add a new thought', root_path, class: "font-round-title btn btn-pink" %>
  </div>
</div>

<%= content_for :after_js do %>
  <script type="text/javascript">
    const looopAnimation = (targetClass, className, delay) => {
      var elements = document.querySelectorAll(targetClass);

      elements.forEach((element) => {

        element.addEventListener("animationend", () => {
          element.classList.remove(className);
        });

        var mytap = window.ontouchstart === null? "touchstart" : "click";
        element.addEventListener(mytap, (event) => {
          event.preventDefault();

          setTimeout(() => {
            element.classList.add(className);
          }, delay);
        });
      });
    };


  looopAnimation(".mitarashi", "poyon", 300);

    const weekMonth = document.findById
  </script>
<% end %>
